<?php declare(strict_types=1);

namespace Kensho\Indicators\Tests\Unit\Indicator;

use Brick\Math\BigDecimal;
use Brick\Math\Exception\MathException;
use Brick\Math\RoundingMode;
use DomainException;
use Kensho\Indicators\Indicator\SMA\SMA;
use Kensho\Indicators\Indicator\SMA\SMAInterface;
use PHPUnit\Framework\Attributes\DataProvider;
use PHPUnit\Framework\TestCase;

final class SMATest extends TestCase
{
    #[DataProvider('provideInvalidPeriod')]
    public function testInvalidPeriod(int $period): void
    {
        $this->expectException(DomainException::class);

        $actual = new SMA($period);

        $this->assertInstanceOf(SMAInterface::class, $actual);
    }

    /**
     * @param array<string, string>      $values
     * @param array<string, string|null> $expected
     *
     * @throws MathException
     */
    #[DataProvider('provideData')]
    public function testCalculate(int $period, array $values, array $expected): void
    {
        $instance = new SMA($period);
        $actual   = [];

        foreach ($values as $date => $value) {
            $actual[$date] = $instance->calculate(
                BigDecimal::of($value),
            )?->toScale(
                4,
                RoundingMode::HALF_UP,
            )->__toString();
        }
        $this->assertSame($expected, $actual);
    }

    /**
     * @return array<string, array<string, int>>
     */
    public static function provideInvalidPeriod(): array
    {
        return [
            'Period negative'  => [ 'period' => -1 ],
            'Period zero'      => [ 'period' =>  0 ],
            'Period too short' => [ 'period' =>  1 ],
        ];
    }

    /**
     * @return array<string, array<string, int|array<string, string|null>>>
     */
    public static function provideData(): array
    {
        return [
            'SMA 2 days'   => [
                'period'   => 2,
                'values'   => [
                    '2023-01-25' => '141.8600',
                    '2023-01-26' => '143.9600',
                    '2023-01-27' => '145.9300',
                    '2023-01-30' => '143.0000',
                    '2023-01-31' => '144.2900',
                    '2023-02-01' => '145.4300',
                    '2023-02-02' => '150.8200',
                    '2023-02-03' => '154.5000',
                    '2023-02-06' => '151.7300',
                    '2023-02-07' => '154.6500',
                    '2023-02-08' => '151.9200',
                    '2023-02-09' => '150.8700',
                    '2023-02-10' => '151.0100',
                    '2023-02-13' => '153.8500',
                    '2023-02-14' => '153.2000',
                    '2023-02-15' => '155.3300',
                    '2023-02-16' => '153.7100',
                    '2023-02-17' => '152.5500',
                    '2023-02-21' => '148.4800',
                    '2023-02-22' => '148.9100',
                    '2023-02-23' => '149.4000',
                    '2023-02-24' => '146.7100',
                    '2023-02-27' => '147.9200',
                    '2023-02-28' => '147.4100',
                    '2023-03-01' => '145.3100',
                    '2023-03-02' => '145.9100',
                    '2023-03-03' => '151.0300',
                    '2023-03-06' => '153.8300',
                    '2023-03-07' => '151.6000',
                    '2023-03-08' => '152.8700',
                    '2023-03-09' => '150.5900',
                    '2023-03-10' => '148.5000',
                    '2023-03-13' => '150.4700',
                    '2023-03-14' => '152.5900',
                    '2023-03-15' => '152.9900',
                    '2023-03-16' => '155.8500',
                    '2023-03-17' => '155.0000',
                    '2023-03-20' => '157.4000',
                    '2023-03-21' => '159.2800',
                    '2023-03-22' => '157.8300',
                    '2023-03-23' => '158.9300',
                    '2023-03-24' => '160.2500',
                    '2023-03-27' => '158.2800',
                    '2023-03-28' => '157.6500',
                    '2023-03-29' => '160.7700',
                    '2023-03-30' => '162.3600',
                    '2023-03-31' => '164.9000',
                    '2023-04-03' => '166.1700',
                    '2023-04-04' => '165.6300',
                    '2023-04-05' => '163.7600',
                    '2023-04-06' => '164.6600',
                    '2023-04-10' => '162.0300',
                    '2023-04-11' => '160.8000',
                    '2023-04-12' => '160.1000',
                    '2023-04-13' => '165.5600',
                    '2023-04-14' => '165.2100',
                    '2023-04-17' => '165.2300',
                    '2023-04-18' => '166.4700',
                    '2023-04-19' => '167.6300',
                    '2023-04-20' => '166.6500',
                    '2023-04-21' => '165.0200',
                    '2023-04-24' => '165.3300',
                    '2023-04-25' => '163.7700',
                    '2023-04-26' => '163.7600',
                    '2023-04-27' => '168.4100',
                    '2023-04-28' => '169.6800',
                    '2023-05-01' => '169.5900',
                    '2023-05-02' => '168.5400',
                    '2023-05-03' => '167.4500',
                    '2023-05-04' => '165.7900',
                    '2023-05-05' => '173.5700',
                    '2023-05-08' => '173.5000',
                    '2023-05-09' => '171.7700',
                    '2023-05-10' => '173.5550',
                    '2023-05-11' => '173.7500',
                    '2023-05-12' => '172.5700',
                    '2023-05-15' => '172.0700',
                    '2023-05-16' => '172.0700',
                    '2023-05-17' => '172.6900',
                    '2023-05-18' => '175.0500',
                    '2023-05-19' => '175.1600',
                    '2023-05-22' => '174.2000',
                    '2023-05-23' => '171.5600',
                    '2023-05-24' => '171.8400',
                    '2023-05-25' => '172.9900',
                    '2023-05-26' => '175.4300',
                    '2023-05-30' => '177.3000',
                    '2023-05-31' => '177.2500',
                    '2023-06-01' => '180.0900',
                    '2023-06-02' => '180.9500',
                    '2023-06-05' => '179.5800',
                    '2023-06-06' => '179.2100',
                    '2023-06-07' => '177.8200',
                    '2023-06-08' => '180.5700',
                    '2023-06-09' => '180.9600',
                    '2023-06-12' => '183.7900',
                    '2023-06-13' => '183.3100',
                    '2023-06-14' => '183.9500',
                    '2023-06-15' => '186.0100',
                    '2023-06-16' => '184.9200',
                ],
                'expected' => [
                    '2023-01-25' => null,
                    '2023-01-26' => '142.9100',
                    '2023-01-27' => '144.9450',
                    '2023-01-30' => '144.4650',
                    '2023-01-31' => '143.6450',
                    '2023-02-01' => '144.8600',
                    '2023-02-02' => '148.1250',
                    '2023-02-03' => '152.6600',
                    '2023-02-06' => '153.1150',
                    '2023-02-07' => '153.1900',
                    '2023-02-08' => '153.2850',
                    '2023-02-09' => '151.3950',
                    '2023-02-10' => '150.9400',
                    '2023-02-13' => '152.4300',
                    '2023-02-14' => '153.5250',
                    '2023-02-15' => '154.2650',
                    '2023-02-16' => '154.5200',
                    '2023-02-17' => '153.1300',
                    '2023-02-21' => '150.5150',
                    '2023-02-22' => '148.6950',
                    '2023-02-23' => '149.1550',
                    '2023-02-24' => '148.0550',
                    '2023-02-27' => '147.3150',
                    '2023-02-28' => '147.6650',
                    '2023-03-01' => '146.3600',
                    '2023-03-02' => '145.6100',
                    '2023-03-03' => '148.4700',
                    '2023-03-06' => '152.4300',
                    '2023-03-07' => '152.7150',
                    '2023-03-08' => '152.2350',
                    '2023-03-09' => '151.7300',
                    '2023-03-10' => '149.5450',
                    '2023-03-13' => '149.4850',
                    '2023-03-14' => '151.5300',
                    '2023-03-15' => '152.7900',
                    '2023-03-16' => '154.4200',
                    '2023-03-17' => '155.4250',
                    '2023-03-20' => '156.2000',
                    '2023-03-21' => '158.3400',
                    '2023-03-22' => '158.5550',
                    '2023-03-23' => '158.3800',
                    '2023-03-24' => '159.5900',
                    '2023-03-27' => '159.2650',
                    '2023-03-28' => '157.9650',
                    '2023-03-29' => '159.2100',
                    '2023-03-30' => '161.5650',
                    '2023-03-31' => '163.6300',
                    '2023-04-03' => '165.5350',
                    '2023-04-04' => '165.9000',
                    '2023-04-05' => '164.6950',
                    '2023-04-06' => '164.2100',
                    '2023-04-10' => '163.3450',
                    '2023-04-11' => '161.4150',
                    '2023-04-12' => '160.4500',
                    '2023-04-13' => '162.8300',
                    '2023-04-14' => '165.3850',
                    '2023-04-17' => '165.2200',
                    '2023-04-18' => '165.8500',
                    '2023-04-19' => '167.0500',
                    '2023-04-20' => '167.1400',
                    '2023-04-21' => '165.8350',
                    '2023-04-24' => '165.1750',
                    '2023-04-25' => '164.5500',
                    '2023-04-26' => '163.7650',
                    '2023-04-27' => '166.0850',
                    '2023-04-28' => '169.0450',
                    '2023-05-01' => '169.6350',
                    '2023-05-02' => '169.0650',
                    '2023-05-03' => '167.9950',
                    '2023-05-04' => '166.6200',
                    '2023-05-05' => '169.6800',
                    '2023-05-08' => '173.5350',
                    '2023-05-09' => '172.6350',
                    '2023-05-10' => '172.6625',
                    '2023-05-11' => '173.6525',
                    '2023-05-12' => '173.1600',
                    '2023-05-15' => '172.3200',
                    '2023-05-16' => '172.0700',
                    '2023-05-17' => '172.3800',
                    '2023-05-18' => '173.8700',
                    '2023-05-19' => '175.1050',
                    '2023-05-22' => '174.6800',
                    '2023-05-23' => '172.8800',
                    '2023-05-24' => '171.7000',
                    '2023-05-25' => '172.4150',
                    '2023-05-26' => '174.2100',
                    '2023-05-30' => '176.3650',
                    '2023-05-31' => '177.2750',
                    '2023-06-01' => '178.6700',
                    '2023-06-02' => '180.5200',
                    '2023-06-05' => '180.2650',
                    '2023-06-06' => '179.3950',
                    '2023-06-07' => '178.5150',
                    '2023-06-08' => '179.1950',
                    '2023-06-09' => '180.7650',
                    '2023-06-12' => '182.3750',
                    '2023-06-13' => '183.5500',
                    '2023-06-14' => '183.6300',
                    '2023-06-15' => '184.9800',
                    '2023-06-16' => '185.4650',
                ],
            ],
            'SMA 21 days'  => [
                'period'   => 21,
                'values'   => [
                    '2023-01-25' => '141.8600',
                    '2023-01-26' => '143.9600',
                    '2023-01-27' => '145.9300',
                    '2023-01-30' => '143.0000',
                    '2023-01-31' => '144.2900',
                    '2023-02-01' => '145.4300',
                    '2023-02-02' => '150.8200',
                    '2023-02-03' => '154.5000',
                    '2023-02-06' => '151.7300',
                    '2023-02-07' => '154.6500',
                    '2023-02-08' => '151.9200',
                    '2023-02-09' => '150.8700',
                    '2023-02-10' => '151.0100',
                    '2023-02-13' => '153.8500',
                    '2023-02-14' => '153.2000',
                    '2023-02-15' => '155.3300',
                    '2023-02-16' => '153.7100',
                    '2023-02-17' => '152.5500',
                    '2023-02-21' => '148.4800',
                    '2023-02-22' => '148.9100',
                    '2023-02-23' => '149.4000',
                    '2023-02-24' => '146.7100',
                    '2023-02-27' => '147.9200',
                    '2023-02-28' => '147.4100',
                    '2023-03-01' => '145.3100',
                    '2023-03-02' => '145.9100',
                    '2023-03-03' => '151.0300',
                    '2023-03-06' => '153.8300',
                    '2023-03-07' => '151.6000',
                    '2023-03-08' => '152.8700',
                    '2023-03-09' => '150.5900',
                    '2023-03-10' => '148.5000',
                    '2023-03-13' => '150.4700',
                    '2023-03-14' => '152.5900',
                    '2023-03-15' => '152.9900',
                    '2023-03-16' => '155.8500',
                    '2023-03-17' => '155.0000',
                    '2023-03-20' => '157.4000',
                    '2023-03-21' => '159.2800',
                    '2023-03-22' => '157.8300',
                    '2023-03-23' => '158.9300',
                    '2023-03-24' => '160.2500',
                    '2023-03-27' => '158.2800',
                    '2023-03-28' => '157.6500',
                    '2023-03-29' => '160.7700',
                    '2023-03-30' => '162.3600',
                    '2023-03-31' => '164.9000',
                    '2023-04-03' => '166.1700',
                    '2023-04-04' => '165.6300',
                    '2023-04-05' => '163.7600',
                    '2023-04-06' => '164.6600',
                    '2023-04-10' => '162.0300',
                    '2023-04-11' => '160.8000',
                    '2023-04-12' => '160.1000',
                    '2023-04-13' => '165.5600',
                    '2023-04-14' => '165.2100',
                    '2023-04-17' => '165.2300',
                    '2023-04-18' => '166.4700',
                    '2023-04-19' => '167.6300',
                    '2023-04-20' => '166.6500',
                    '2023-04-21' => '165.0200',
                    '2023-04-24' => '165.3300',
                    '2023-04-25' => '163.7700',
                    '2023-04-26' => '163.7600',
                    '2023-04-27' => '168.4100',
                    '2023-04-28' => '169.6800',
                    '2023-05-01' => '169.5900',
                    '2023-05-02' => '168.5400',
                    '2023-05-03' => '167.4500',
                    '2023-05-04' => '165.7900',
                    '2023-05-05' => '173.5700',
                    '2023-05-08' => '173.5000',
                    '2023-05-09' => '171.7700',
                    '2023-05-10' => '173.5550',
                    '2023-05-11' => '173.7500',
                    '2023-05-12' => '172.5700',
                    '2023-05-15' => '172.0700',
                    '2023-05-16' => '172.0700',
                    '2023-05-17' => '172.6900',
                    '2023-05-18' => '175.0500',
                    '2023-05-19' => '175.1600',
                    '2023-05-22' => '174.2000',
                    '2023-05-23' => '171.5600',
                    '2023-05-24' => '171.8400',
                    '2023-05-25' => '172.9900',
                    '2023-05-26' => '175.4300',
                    '2023-05-30' => '177.3000',
                    '2023-05-31' => '177.2500',
                    '2023-06-01' => '180.0900',
                    '2023-06-02' => '180.9500',
                    '2023-06-05' => '179.5800',
                    '2023-06-06' => '179.2100',
                    '2023-06-07' => '177.8200',
                    '2023-06-08' => '180.5700',
                    '2023-06-09' => '180.9600',
                    '2023-06-12' => '183.7900',
                    '2023-06-13' => '183.3100',
                    '2023-06-14' => '183.9500',
                    '2023-06-15' => '186.0100',
                    '2023-06-16' => '184.9200',
                ],
                'expected' => [
                    '2023-01-25' => null,
                    '2023-01-26' => null,
                    '2023-01-27' => null,
                    '2023-01-30' => null,
                    '2023-01-31' => null,
                    '2023-02-01' => null,
                    '2023-02-02' => null,
                    '2023-02-03' => null,
                    '2023-02-06' => null,
                    '2023-02-07' => null,
                    '2023-02-08' => null,
                    '2023-02-09' => null,
                    '2023-02-10' => null,
                    '2023-02-13' => null,
                    '2023-02-14' => null,
                    '2023-02-15' => null,
                    '2023-02-16' => null,
                    '2023-02-17' => null,
                    '2023-02-21' => null,
                    '2023-02-22' => null,
                    '2023-02-23' => '149.7810',
                    '2023-02-24' => '150.0119',
                    '2023-02-27' => '150.2005',
                    '2023-02-28' => '150.2710',
                    '2023-03-01' => '150.3810',
                    '2023-03-02' => '150.4581',
                    '2023-03-03' => '150.7248',
                    '2023-03-06' => '150.8681',
                    '2023-03-07' => '150.7300',
                    '2023-03-08' => '150.7843',
                    '2023-03-09' => '150.5910',
                    '2023-03-10' => '150.4281',
                    '2023-03-13' => '150.4090',
                    '2023-03-14' => '150.4843',
                    '2023-03-15' => '150.4433',
                    '2023-03-16' => '150.5695',
                    '2023-03-17' => '150.5538',
                    '2023-03-20' => '150.7295',
                    '2023-03-21' => '151.0500',
                    '2023-03-22' => '151.4952',
                    '2023-03-23' => '151.9724',
                    '2023-03-24' => '152.4890',
                    '2023-03-27' => '153.0400',
                    '2023-03-28' => '153.5033',
                    '2023-03-29' => '154.1395',
                    '2023-03-30' => '154.9514',
                    '2023-03-31' => '155.8557',
                    '2023-04-03' => '156.5767',
                    '2023-04-04' => '157.1386',
                    '2023-04-05' => '157.7176',
                    '2023-04-06' => '158.2790',
                    '2023-04-10' => '158.8238',
                    '2023-04-11' => '159.4095',
                    '2023-04-12' => '159.8681',
                    '2023-04-13' => '160.4857',
                    '2023-04-14' => '161.0676',
                    '2023-04-17' => '161.5143',
                    '2023-04-18' => '162.0605',
                    '2023-04-19' => '162.5476',
                    '2023-04-20' => '162.8986',
                    '2023-04-21' => '163.2410',
                    '2023-04-24' => '163.5457',
                    '2023-04-25' => '163.7133',
                    '2023-04-26' => '163.9743',
                    '2023-04-27' => '164.4867',
                    '2023-04-28' => '164.9110',
                    '2023-05-01' => '165.2552',
                    '2023-05-02' => '165.4286',
                    '2023-05-03' => '165.4895',
                    '2023-05-04' => '165.4971',
                    '2023-05-05' => '165.9643',
                    '2023-05-08' => '166.3852',
                    '2023-05-09' => '166.8490',
                    '2023-05-10' => '167.4564',
                    '2023-05-11' => '168.1064',
                    '2023-05-12' => '168.4402',
                    '2023-05-15' => '168.7669',
                    '2023-05-16' => '169.0926',
                    '2023-05-17' => '169.3888',
                    '2023-05-18' => '169.7421',
                    '2023-05-19' => '170.1474',
                    '2023-05-22' => '170.5845',
                    '2023-05-23' => '170.8812',
                    '2023-05-24' => '171.2655',
                    '2023-05-25' => '171.7050',
                    '2023-05-26' => '172.0393',
                    '2023-05-30' => '172.4021',
                    '2023-05-31' => '172.7669',
                    '2023-06-01' => '173.3169',
                    '2023-06-02' => '173.9598',
                    '2023-06-05' => '174.6164',
                    '2023-06-06' => '174.8850',
                    '2023-06-07' => '175.0907',
                    '2023-06-08' => '175.5098',
                    '2023-06-09' => '175.8624',
                    '2023-06-12' => '176.3405',
                    '2023-06-13' => '176.8519',
                    '2023-06-14' => '177.4176',
                    '2023-06-15' => '178.0814',
                    '2023-06-16' => '178.6638',
                ],
            ],
            'SMA 73 days'  => [
                'period'   => 73,
                'values'   => [
                    '2023-01-25' => '141.8600',
                    '2023-01-26' => '143.9600',
                    '2023-01-27' => '145.9300',
                    '2023-01-30' => '143.0000',
                    '2023-01-31' => '144.2900',
                    '2023-02-01' => '145.4300',
                    '2023-02-02' => '150.8200',
                    '2023-02-03' => '154.5000',
                    '2023-02-06' => '151.7300',
                    '2023-02-07' => '154.6500',
                    '2023-02-08' => '151.9200',
                    '2023-02-09' => '150.8700',
                    '2023-02-10' => '151.0100',
                    '2023-02-13' => '153.8500',
                    '2023-02-14' => '153.2000',
                    '2023-02-15' => '155.3300',
                    '2023-02-16' => '153.7100',
                    '2023-02-17' => '152.5500',
                    '2023-02-21' => '148.4800',
                    '2023-02-22' => '148.9100',
                    '2023-02-23' => '149.4000',
                    '2023-02-24' => '146.7100',
                    '2023-02-27' => '147.9200',
                    '2023-02-28' => '147.4100',
                    '2023-03-01' => '145.3100',
                    '2023-03-02' => '145.9100',
                    '2023-03-03' => '151.0300',
                    '2023-03-06' => '153.8300',
                    '2023-03-07' => '151.6000',
                    '2023-03-08' => '152.8700',
                    '2023-03-09' => '150.5900',
                    '2023-03-10' => '148.5000',
                    '2023-03-13' => '150.4700',
                    '2023-03-14' => '152.5900',
                    '2023-03-15' => '152.9900',
                    '2023-03-16' => '155.8500',
                    '2023-03-17' => '155.0000',
                    '2023-03-20' => '157.4000',
                    '2023-03-21' => '159.2800',
                    '2023-03-22' => '157.8300',
                    '2023-03-23' => '158.9300',
                    '2023-03-24' => '160.2500',
                    '2023-03-27' => '158.2800',
                    '2023-03-28' => '157.6500',
                    '2023-03-29' => '160.7700',
                    '2023-03-30' => '162.3600',
                    '2023-03-31' => '164.9000',
                    '2023-04-03' => '166.1700',
                    '2023-04-04' => '165.6300',
                    '2023-04-05' => '163.7600',
                    '2023-04-06' => '164.6600',
                    '2023-04-10' => '162.0300',
                    '2023-04-11' => '160.8000',
                    '2023-04-12' => '160.1000',
                    '2023-04-13' => '165.5600',
                    '2023-04-14' => '165.2100',
                    '2023-04-17' => '165.2300',
                    '2023-04-18' => '166.4700',
                    '2023-04-19' => '167.6300',
                    '2023-04-20' => '166.6500',
                    '2023-04-21' => '165.0200',
                    '2023-04-24' => '165.3300',
                    '2023-04-25' => '163.7700',
                    '2023-04-26' => '163.7600',
                    '2023-04-27' => '168.4100',
                    '2023-04-28' => '169.6800',
                    '2023-05-01' => '169.5900',
                    '2023-05-02' => '168.5400',
                    '2023-05-03' => '167.4500',
                    '2023-05-04' => '165.7900',
                    '2023-05-05' => '173.5700',
                    '2023-05-08' => '173.5000',
                    '2023-05-09' => '171.7700',
                    '2023-05-10' => '173.5550',
                    '2023-05-11' => '173.7500',
                    '2023-05-12' => '172.5700',
                    '2023-05-15' => '172.0700',
                    '2023-05-16' => '172.0700',
                    '2023-05-17' => '172.6900',
                    '2023-05-18' => '175.0500',
                    '2023-05-19' => '175.1600',
                    '2023-05-22' => '174.2000',
                    '2023-05-23' => '171.5600',
                    '2023-05-24' => '171.8400',
                    '2023-05-25' => '172.9900',
                    '2023-05-26' => '175.4300',
                    '2023-05-30' => '177.3000',
                    '2023-05-31' => '177.2500',
                    '2023-06-01' => '180.0900',
                    '2023-06-02' => '180.9500',
                    '2023-06-05' => '179.5800',
                    '2023-06-06' => '179.2100',
                    '2023-06-07' => '177.8200',
                    '2023-06-08' => '180.5700',
                    '2023-06-09' => '180.9600',
                    '2023-06-12' => '183.7900',
                    '2023-06-13' => '183.3100',
                    '2023-06-14' => '183.9500',
                    '2023-06-15' => '186.0100',
                    '2023-06-16' => '184.9200',
                ],
                'expected' => [
                    '2023-01-25' => null,
                    '2023-01-26' => null,
                    '2023-01-27' => null,
                    '2023-01-30' => null,
                    '2023-01-31' => null,
                    '2023-02-01' => null,
                    '2023-02-02' => null,
                    '2023-02-03' => null,
                    '2023-02-06' => null,
                    '2023-02-07' => null,
                    '2023-02-08' => null,
                    '2023-02-09' => null,
                    '2023-02-10' => null,
                    '2023-02-13' => null,
                    '2023-02-14' => null,
                    '2023-02-15' => null,
                    '2023-02-16' => null,
                    '2023-02-17' => null,
                    '2023-02-21' => null,
                    '2023-02-22' => null,
                    '2023-02-23' => null,
                    '2023-02-24' => null,
                    '2023-02-27' => null,
                    '2023-02-28' => null,
                    '2023-03-01' => null,
                    '2023-03-02' => null,
                    '2023-03-03' => null,
                    '2023-03-06' => null,
                    '2023-03-07' => null,
                    '2023-03-08' => null,
                    '2023-03-09' => null,
                    '2023-03-10' => null,
                    '2023-03-13' => null,
                    '2023-03-14' => null,
                    '2023-03-15' => null,
                    '2023-03-16' => null,
                    '2023-03-17' => null,
                    '2023-03-20' => null,
                    '2023-03-21' => null,
                    '2023-03-22' => null,
                    '2023-03-23' => null,
                    '2023-03-24' => null,
                    '2023-03-27' => null,
                    '2023-03-28' => null,
                    '2023-03-29' => null,
                    '2023-03-30' => null,
                    '2023-03-31' => null,
                    '2023-04-03' => null,
                    '2023-04-04' => null,
                    '2023-04-05' => null,
                    '2023-04-06' => null,
                    '2023-04-10' => null,
                    '2023-04-11' => null,
                    '2023-04-12' => null,
                    '2023-04-13' => null,
                    '2023-04-14' => null,
                    '2023-04-17' => null,
                    '2023-04-18' => null,
                    '2023-04-19' => null,
                    '2023-04-20' => null,
                    '2023-04-21' => null,
                    '2023-04-24' => null,
                    '2023-04-25' => null,
                    '2023-04-26' => null,
                    '2023-04-27' => null,
                    '2023-04-28' => null,
                    '2023-05-01' => null,
                    '2023-05-02' => null,
                    '2023-05-03' => null,
                    '2023-05-04' => null,
                    '2023-05-05' => null,
                    '2023-05-08' => null,
                    '2023-05-09' => '157.2289',
                    '2023-05-10' => '157.6631',
                    '2023-05-11' => '158.0712',
                    '2023-05-12' => '158.4361',
                    '2023-05-15' => '158.8343',
                    '2023-05-16' => '159.2149',
                    '2023-05-17' => '159.5883',
                    '2023-05-18' => '159.9202',
                    '2023-05-19' => '160.2032',
                    '2023-05-22' => '160.5110',
                    '2023-05-23' => '160.7427',
                    '2023-05-24' => '161.0155',
                    '2023-05-25' => '161.3186',
                    '2023-05-26' => '161.6531',
                    '2023-05-30' => '161.9743',
                    '2023-05-31' => '162.3038',
                    '2023-06-01' => '162.6429',
                    '2023-06-02' => '163.0161',
                    '2023-06-05' => '163.3864',
                    '2023-06-06' => '163.8073',
                    '2023-06-07' => '164.2034',
                    '2023-06-08' => '164.6303',
                    '2023-06-09' => '165.0995',
                    '2023-06-12' => '165.5909',
                    '2023-06-13' => '166.0827',
                    '2023-06-14' => '166.6120',
                    '2023-06-15' => '167.1613',
                    '2023-06-16' => '167.6255',
                ],
            ],
            'SMA 120 days' => [
                'period'   => 120,
                'values'   => [
                    '2023-01-25' => '141.8600',
                    '2023-01-26' => '143.9600',
                    '2023-01-27' => '145.9300',
                    '2023-01-30' => '143.0000',
                    '2023-01-31' => '144.2900',
                    '2023-02-01' => '145.4300',
                    '2023-02-02' => '150.8200',
                    '2023-02-03' => '154.5000',
                    '2023-02-06' => '151.7300',
                    '2023-02-07' => '154.6500',
                    '2023-02-08' => '151.9200',
                    '2023-02-09' => '150.8700',
                    '2023-02-10' => '151.0100',
                    '2023-02-13' => '153.8500',
                    '2023-02-14' => '153.2000',
                    '2023-02-15' => '155.3300',
                    '2023-02-16' => '153.7100',
                    '2023-02-17' => '152.5500',
                    '2023-02-21' => '148.4800',
                    '2023-02-22' => '148.9100',
                    '2023-02-23' => '149.4000',
                    '2023-02-24' => '146.7100',
                    '2023-02-27' => '147.9200',
                    '2023-02-28' => '147.4100',
                    '2023-03-01' => '145.3100',
                    '2023-03-02' => '145.9100',
                    '2023-03-03' => '151.0300',
                    '2023-03-06' => '153.8300',
                    '2023-03-07' => '151.6000',
                    '2023-03-08' => '152.8700',
                    '2023-03-09' => '150.5900',
                    '2023-03-10' => '148.5000',
                    '2023-03-13' => '150.4700',
                    '2023-03-14' => '152.5900',
                    '2023-03-15' => '152.9900',
                    '2023-03-16' => '155.8500',
                    '2023-03-17' => '155.0000',
                    '2023-03-20' => '157.4000',
                    '2023-03-21' => '159.2800',
                    '2023-03-22' => '157.8300',
                    '2023-03-23' => '158.9300',
                    '2023-03-24' => '160.2500',
                    '2023-03-27' => '158.2800',
                    '2023-03-28' => '157.6500',
                    '2023-03-29' => '160.7700',
                    '2023-03-30' => '162.3600',
                    '2023-03-31' => '164.9000',
                    '2023-04-03' => '166.1700',
                    '2023-04-04' => '165.6300',
                    '2023-04-05' => '163.7600',
                    '2023-04-06' => '164.6600',
                    '2023-04-10' => '162.0300',
                    '2023-04-11' => '160.8000',
                    '2023-04-12' => '160.1000',
                    '2023-04-13' => '165.5600',
                    '2023-04-14' => '165.2100',
                    '2023-04-17' => '165.2300',
                    '2023-04-18' => '166.4700',
                    '2023-04-19' => '167.6300',
                    '2023-04-20' => '166.6500',
                    '2023-04-21' => '165.0200',
                    '2023-04-24' => '165.3300',
                    '2023-04-25' => '163.7700',
                    '2023-04-26' => '163.7600',
                    '2023-04-27' => '168.4100',
                    '2023-04-28' => '169.6800',
                    '2023-05-01' => '169.5900',
                    '2023-05-02' => '168.5400',
                    '2023-05-03' => '167.4500',
                    '2023-05-04' => '165.7900',
                    '2023-05-05' => '173.5700',
                    '2023-05-08' => '173.5000',
                    '2023-05-09' => '171.7700',
                    '2023-05-10' => '173.5550',
                    '2023-05-11' => '173.7500',
                    '2023-05-12' => '172.5700',
                    '2023-05-15' => '172.0700',
                    '2023-05-16' => '172.0700',
                    '2023-05-17' => '172.6900',
                    '2023-05-18' => '175.0500',
                    '2023-05-19' => '175.1600',
                    '2023-05-22' => '174.2000',
                    '2023-05-23' => '171.5600',
                    '2023-05-24' => '171.8400',
                    '2023-05-25' => '172.9900',
                    '2023-05-26' => '175.4300',
                    '2023-05-30' => '177.3000',
                    '2023-05-31' => '177.2500',
                    '2023-06-01' => '180.0900',
                    '2023-06-02' => '180.9500',
                    '2023-06-05' => '179.5800',
                    '2023-06-06' => '179.2100',
                    '2023-06-07' => '177.8200',
                    '2023-06-08' => '180.5700',
                    '2023-06-09' => '180.9600',
                    '2023-06-12' => '183.7900',
                    '2023-06-13' => '183.3100',
                    '2023-06-14' => '183.9500',
                    '2023-06-15' => '186.0100',
                    '2023-06-16' => '184.9200',
                ],
                'expected' => [
                    '2023-01-25' => null,
                    '2023-01-26' => null,
                    '2023-01-27' => null,
                    '2023-01-30' => null,
                    '2023-01-31' => null,
                    '2023-02-01' => null,
                    '2023-02-02' => null,
                    '2023-02-03' => null,
                    '2023-02-06' => null,
                    '2023-02-07' => null,
                    '2023-02-08' => null,
                    '2023-02-09' => null,
                    '2023-02-10' => null,
                    '2023-02-13' => null,
                    '2023-02-14' => null,
                    '2023-02-15' => null,
                    '2023-02-16' => null,
                    '2023-02-17' => null,
                    '2023-02-21' => null,
                    '2023-02-22' => null,
                    '2023-02-23' => null,
                    '2023-02-24' => null,
                    '2023-02-27' => null,
                    '2023-02-28' => null,
                    '2023-03-01' => null,
                    '2023-03-02' => null,
                    '2023-03-03' => null,
                    '2023-03-06' => null,
                    '2023-03-07' => null,
                    '2023-03-08' => null,
                    '2023-03-09' => null,
                    '2023-03-10' => null,
                    '2023-03-13' => null,
                    '2023-03-14' => null,
                    '2023-03-15' => null,
                    '2023-03-16' => null,
                    '2023-03-17' => null,
                    '2023-03-20' => null,
                    '2023-03-21' => null,
                    '2023-03-22' => null,
                    '2023-03-23' => null,
                    '2023-03-24' => null,
                    '2023-03-27' => null,
                    '2023-03-28' => null,
                    '2023-03-29' => null,
                    '2023-03-30' => null,
                    '2023-03-31' => null,
                    '2023-04-03' => null,
                    '2023-04-04' => null,
                    '2023-04-05' => null,
                    '2023-04-06' => null,
                    '2023-04-10' => null,
                    '2023-04-11' => null,
                    '2023-04-12' => null,
                    '2023-04-13' => null,
                    '2023-04-14' => null,
                    '2023-04-17' => null,
                    '2023-04-18' => null,
                    '2023-04-19' => null,
                    '2023-04-20' => null,
                    '2023-04-21' => null,
                    '2023-04-24' => null,
                    '2023-04-25' => null,
                    '2023-04-26' => null,
                    '2023-04-27' => null,
                    '2023-04-28' => null,
                    '2023-05-01' => null,
                    '2023-05-02' => null,
                    '2023-05-03' => null,
                    '2023-05-04' => null,
                    '2023-05-05' => null,
                    '2023-05-08' => null,
                    '2023-05-09' => null,
                    '2023-05-10' => null,
                    '2023-05-11' => null,
                    '2023-05-12' => null,
                    '2023-05-15' => null,
                    '2023-05-16' => null,
                    '2023-05-17' => null,
                    '2023-05-18' => null,
                    '2023-05-19' => null,
                    '2023-05-22' => null,
                    '2023-05-23' => null,
                    '2023-05-24' => null,
                    '2023-05-25' => null,
                    '2023-05-26' => null,
                    '2023-05-30' => null,
                    '2023-05-31' => null,
                    '2023-06-01' => null,
                    '2023-06-02' => null,
                    '2023-06-05' => null,
                    '2023-06-06' => null,
                    '2023-06-07' => null,
                    '2023-06-08' => null,
                    '2023-06-09' => null,
                    '2023-06-12' => null,
                    '2023-06-13' => null,
                    '2023-06-14' => null,
                    '2023-06-15' => null,
                    '2023-06-16' => null,
                ],
            ],
        ];
    }
}
